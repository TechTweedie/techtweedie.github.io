<!DOCTYPE html>
<html lang="en">
    <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>Build a Basic PCF Field Control - Tech Tweedie</title><meta name="description" content="Want to get started using the Power Apps Component Framework (PCF), would you like to start building controls. In this blog post we are going to step through the process to building your first component."><meta property="og:url" content="http://localhost:1313/posts/build-a-basic-pcf-field-control/">
  <meta property="og:site_name" content="Tech Tweedie">
  <meta property="og:title" content="Build a Basic PCF Field Control">
  <meta property="og:description" content="Want to get started using the Power Apps Component Framework (PCF), would you like to start building controls. In this blog post we are going to step through the process to building your first component.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-06-16T19:32:41+01:00">
    <meta property="article:modified_time" content="2024-06-16T19:32:41+01:00">
    <meta property="article:tag" content="PCF">
    <meta property="og:image" content="http://localhost:1313/posts/build-a-basic-pcf-field-control/featureImage.png">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="http://localhost:1313/posts/build-a-basic-pcf-field-control/featureImage.png">
  <meta name="twitter:title" content="Build a Basic PCF Field Control">
  <meta name="twitter:description" content="Want to get started using the Power Apps Component Framework (PCF), would you like to start building controls. In this blog post we are going to step through the process to building your first component.">
      <meta name="twitter:site" content="@itweedie">
<meta name="application-name" content="Tech Tweedie">
<meta name="apple-mobile-web-app-title" content="Tech Tweedie"><meta name="theme-color" content="#dddddd"><meta name="msapplication-TileColor" content="#dddddd"><link rel="icon" href="/safari-pinned-tab.svg"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#dddddd"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="http://localhost:1313/posts/build-a-basic-pcf-field-control/" /><link rel="prev" href="http://localhost:1313/posts/how-to-install-hugo-on-windows-11/" /><link rel="next" href="http://localhost:1313/posts/command-bar-to-call-custom-page/" /><link rel="stylesheet" href="/css/page.min.css"><link rel="stylesheet" href="/css/home.min.css"><meta name="google-site-verification" content="SJUxP7HXovdJ6V7D8UPJm1ntx_D-yiuiC5XM70mnHCI" /><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Build a Basic PCF Field Control",
        "inLanguage": "en",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "http:\/\/localhost:1313\/posts\/build-a-basic-pcf-field-control\/"
        },"image": [{
                            "@type": "ImageObject",
                            "url": "http:\/\/localhost:1313\/posts\/build-a-basic-pcf-field-control\/featureImage.png",
                            "width":  1281 ,
                            "height":  732 
                        }],"genre": "posts","keywords": "PCF","wordcount":  1125 ,
        "url": "http:\/\/localhost:1313\/posts\/build-a-basic-pcf-field-control\/","datePublished": "2024-06-16T19:32:41+01:00","dateModified": "2024-06-16T19:32:41+01:00","publisher": {
            "@type": "Organization",
            "name": "itweedie"},"author": {
                "@type": "Person",
                "name": "itweedie"
            },"description": "Want to get started using the Power Apps Component Framework (PCF), would you like to start building controls. In this blog post we are going to step through the process to building your first component."
    }
    </script></head><body data-header-desktop="fixed" data-header-mobile="auto"><script>(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Tech Tweedie"><img
        class="lazyload logo"
        src="/svg/loading.min.svg"
        data-src="/logo-01_150x150.png"
        data-srcset="/logo-01_150x150.png, /logo-01_150x150.png 1.5x, /logo-01_150x150.png 2x"
        data-sizes="auto"
        alt="/logo-01_150x150.png"
        title="/logo-01_150x150.png" /><span class="header-title-pre"> </span><span id="id-1" class="typeit"></span></a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> Posts </a><a class="menu-item" href="/tags/"> Tags </a><a class="menu-item" href="/categories/"> Categories </a><a class="menu-item" href="https://www.youtube.com/channel/UCy1a2QSDVZNDwZf7KbNmoHQ" rel="noopener noreffer" target="_blank"> YouTube Channel </a><a class="menu-item" href="https://mightora.io/" rel="noopener noreffer" target="_blank"> Free Power Platform Tools </a><span class="menu-item delimiter"></span><a class="menu-item" href="/index.xml" title="RSS"><i class="fa-solid fa-rss fa-fw" title="RSS"></i> </a><a href="#" onclick="return false;" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fa-solid fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Tech Tweedie"><img
        class="lazyload logo"
        src="/svg/loading.min.svg"
        data-src="/logo-01_150x150.png"
        data-srcset="/logo-01_150x150.png, /logo-01_150x150.png 1.5x, /logo-01_150x150.png 2x"
        data-sizes="auto"
        alt="/logo-01_150x150.png"
        title="/logo-01_150x150.png" /><span class="header-title-pre"> </span><span id="id-2" class="typeit"></span></a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><a class="menu-item" href="/posts/" title="">Posts</a><a class="menu-item" href="/tags/" title="">Tags</a><a class="menu-item" href="/categories/" title="">Categories</a><a class="menu-item" href="https://www.youtube.com/channel/UCy1a2QSDVZNDwZf7KbNmoHQ" title="" rel="noopener noreffer" target="_blank">YouTube Channel</a><a class="menu-item" href="https://mightora.io/" title="" rel="noopener noreffer" target="_blank">Free Power Platform Tools</a><div class="menu-item"><a href="/index.xml" title="RSS"><i class="fa-solid fa-rss fa-fw" title="RSS"></i> </a>
                <span>&nbsp;|&nbsp;</span><a href="#" onclick="return false;" class="theme-switch" title="Switch Theme">
                    <i class="fa-solid fa-adjust fa-fw"></i>
                </a>
            </div></div>
    </div>
</header><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single" data-toc="disable"><div class="featured-image"><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/posts/build-a-basic-pcf-field-control/featureImage.png"
        data-srcset="/posts/build-a-basic-pcf-field-control/featureImage.png, /posts/build-a-basic-pcf-field-control/featureImage.png 1.5x, /posts/build-a-basic-pcf-field-control/featureImage.png 2x"
        data-sizes="auto"
        alt="/posts/build-a-basic-pcf-field-control/featureImage.png"
        title="Want to get started using the Power Apps Component Framework (PCF), would you like to start building controls. In this blog post we are going to step through the process to building your first component." /></div><div class="single-card" data-image="true"><h2 class="single-title animated flipInX">Build a Basic PCF Field Control</h2><div class="post-meta">
                <div class="post-meta-line"><span class="post-author"><a href="https://iantweedie.biz" title="Author" target="_blank" rel="noopener noreffer author" class="author"><i class="fa-solid fa-user-circle fa-fw"></i>itweedie</a></span>&nbsp;<span class="post-category">published in <a href="/categories/power-platform/"><i class="fa-regular fa-folder fa-fw"></i>Power Platform</a></span></div>
                <div class="post-meta-line"><span><i class="fa-regular fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2024-06-16">2024-06-16</time></span>&nbsp;<span><i class="fa-solid fa-pencil-alt fa-fw"></i>&nbsp;1125 words</span>&nbsp;
                    <span><i class="fa-regular fa-clock fa-fw"></i>&nbsp;6 minutes</span>&nbsp;</div>
            </div>
            
            <hr><div class="details toc" id="toc-static"  data-kept="">
                    <div class="details-summary toc-title">
                        <span>Contents</span>
                        <span><i class="details-icon fa-solid fa-angle-right"></i></span>
                    </div>
                    <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#introduction">Introduction</a>
      <ul>
        <li><a href="#what-languages">What languages</a></li>
        <li><a href="#tools">Tools</a></li>
        <li><a href="#why-pcfs">Why PCFs</a></li>
        <li><a href="#options-for-building-controls">Options for building controls</a></li>
      </ul>
    </li>
    <li><a href="#building-our-first-pcf-control">Building our first PCF control</a>
      <ul>
        <li><a href="#step-1-authenticate">Step 1: Authenticate</a></li>
        <li><a href="#step-2-create-a-working-folder">Step 2: Create a working folder</a></li>
        <li><a href="#step-3-initialise-a-blank-component">Step 3: Initialise a blank component</a></li>
        <li><a href="#step-4-lets-go-through-the-code">Step 4: Lets go through the code</a></li>
        <li><a href="#step-5-lets-run-it">Step 5: Lets run it</a></li>
        <li><a href="#step-6-lets-add-some-console-logs">Step 6: Lets add some console logs</a></li>
        <li><a href="#step-7-lets-create-our-input">Step 7: Lets create our input</a></li>
        <li><a href="#step-6-get-our-values-to-update">Step 6: Get our values to update</a></li>
        <li><a href="#step-7-lets-get-our-control-in-to-our-model-driven-app">Step 7: Lets get our control in to our model driven app</a></li>
      </ul>
    </li>
    <li><a href="#conclusion">Conclusion</a></li>
  </ul>
</nav></div>
                </div><div class="content" id="content"><h2 id="introduction">Introduction</h2>
<p>Want to get started using the Power Apps Component Framework (PCF), would you like to start building controls. In this blog post we are going to step through the process to building your first component.</p>
<p><strong>You can watch the accompanying YouTube video here</strong>


    
    <div class="video">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allow="fullscreen"="allow="fullscreen"" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/80CNV9sRzL4?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" title="YouTube video"
      ></iframe>
    </div>
</p>
<h3 id="what-languages">What languages</h3>
<p>To build out our component, we will be using both <strong>TypeScript</strong> and <strong>HTML</strong>. Don&rsquo;t worry if you haven&rsquo;t worked with these before.</p>
<h3 id="tools">Tools</h3>
<p>The tools we will be using today will be;</p>
<ul>
<li>Visual Studio Code</li>
<li>Power Platform Tools Extension</li>
</ul>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="img/vmconnect_WcfCh5QjzB.gif"
        data-srcset="/posts/build-a-basic-pcf-field-control/img/vmconnect_WcfCh5QjzB.gif, img/vmconnect_WcfCh5QjzB.gif 1.5x, /posts/build-a-basic-pcf-field-control/img/vmconnect_WcfCh5QjzB.gif 2x"
        data-sizes="auto"
        alt="/posts/build-a-basic-pcf-field-control/img/vmconnect_WcfCh5QjzB.gif"
        title="Tools" /></p>
<ul>
<li>NodeJS LTS</li>
</ul>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="img/vmconnect_g0nvJmfRoh.gif"
        data-srcset="/posts/build-a-basic-pcf-field-control/img/vmconnect_g0nvJmfRoh.gif, img/vmconnect_g0nvJmfRoh.gif 1.5x, /posts/build-a-basic-pcf-field-control/img/vmconnect_g0nvJmfRoh.gif 2x"
        data-sizes="auto"
        alt="/posts/build-a-basic-pcf-field-control/img/vmconnect_g0nvJmfRoh.gif"
        title="NodeJS" /></p>
<h3 id="why-pcfs">Why PCFs</h3>
<p>We use the PowerApps Component Framework to extend our apps, and to achieve function that is not available out of the box. Out low code canvas can&rsquo;t always achieve what our clients would like and this is when we look to towards this kind of functionality.</p>
<h3 id="options-for-building-controls">Options for building controls</h3>
<p>We have two frameworks we can utilise, alongside two different templates.</p>
<h4 id="frameworks---visual-function">Frameworks - Visual function</h4>
<ul>
<li>Standard Controls - These don&rsquo;t have REACT out of the box.</li>
<li>React (Virtual) Controls - You get to take advantage of REACT that is already been used in the Dataverse, which reduces the size of your controls.</li>
</ul>
<h4 id="control-templates---placement-of-control">Control Templates - Placement of control</h4>
<ul>
<li>Dataset - These can be used instead of view and sub grids</li>
<li>Field - These are bound to a field and are limited to being used on a form</li>
</ul>
<h2 id="building-our-first-pcf-control">Building our first PCF control</h2>
<h3 id="step-1-authenticate">Step 1: Authenticate</h3>
<p>We can authenticate against dataverse with the following command in PowerShell within Visual Studio Code.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-PowerShell" data-lang="PowerShell"><span class="line"><span class="cl"><span class="n">pac</span> <span class="n">auth</span> <span class="n">create</span> <span class="n">-env</span> <span class="n">yourenv</span><span class="p">.</span><span class="py">crm11</span><span class="p">.</span><span class="py">dynamics</span><span class="p">.</span><span class="py">com</span>
</span></span><span class="line"><span class="cl"><span class="n">pac</span> <span class="n">auth</span> <span class="n">list</span>
</span></span></code></pre></div><p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="img/vmconnect_qwUjw1DOQR.gif"
        data-srcset="/posts/build-a-basic-pcf-field-control/img/vmconnect_qwUjw1DOQR.gif, img/vmconnect_qwUjw1DOQR.gif 1.5x, /posts/build-a-basic-pcf-field-control/img/vmconnect_qwUjw1DOQR.gif 2x"
        data-sizes="auto"
        alt="/posts/build-a-basic-pcf-field-control/img/vmconnect_qwUjw1DOQR.gif"
        title="Pac-Auth" /></p>
<h3 id="step-2-create-a-working-folder">Step 2: Create a working folder</h3>
<p>Lets make ourselves a working folder</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-PowerShell" data-lang="PowerShell"><span class="line"><span class="cl"><span class="n">mkdir</span> <span class="n">control11</span>
</span></span><span class="line"><span class="cl"><span class="nb">cd </span><span class="n">control11</span>
</span></span></code></pre></div><p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="img/vmconnect_MsoWnCAhOL.gif"
        data-srcset="/posts/build-a-basic-pcf-field-control/img/vmconnect_MsoWnCAhOL.gif, img/vmconnect_MsoWnCAhOL.gif 1.5x, /posts/build-a-basic-pcf-field-control/img/vmconnect_MsoWnCAhOL.gif 2x"
        data-sizes="auto"
        alt="/posts/build-a-basic-pcf-field-control/img/vmconnect_MsoWnCAhOL.gif"
        title="Create Working Folder" /></p>
<h3 id="step-3-initialise-a-blank-component">Step 3: Initialise a blank component</h3>
<p>Lets just make sure we have Power Platform Tools Installed, and lets remind our-self what the parameters are we need to pass.</p>
<p>Open up the Terminal and enter</p>
<pre tabindex="0"><code class="language-PowerSell" data-lang="PowerSell">pac pcf init help
</code></pre><p>Back will come the following</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-PowerShell" data-lang="PowerShell"><span class="line"><span class="cl"><span class="n">Microsoft</span> <span class="n">PowerPlatform</span> <span class="nb">CLI
</span></span></span><span class="line"><span class="cl"><span class="nb"></span><span class="n">Version</span><span class="err">:</span> <span class="mf">1.31</span><span class="p">.</span><span class="mf">6</span><span class="p">+</span><span class="n">g9147a23</span>
</span></span><span class="line"><span class="cl"><span class="n">Online</span> <span class="n">documentation</span><span class="err">:</span> <span class="n">https</span><span class="err">:</span><span class="p">//</span><span class="n">aka</span><span class="p">.</span><span class="n">ms</span><span class="p">/</span><span class="n">PowerPlatformCLI</span>
</span></span><span class="line"><span class="cl"><span class="n">Feedback</span><span class="p">,</span> <span class="n">Suggestions</span><span class="p">,</span> <span class="n">Issues</span><span class="err">:</span> <span class="n">https</span><span class="err">:</span><span class="p">//</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="p">/</span><span class="n">microsoft</span><span class="p">/</span><span class="nb">powerplatform-build</span><span class="n">-tools</span><span class="p">/</span><span class="n">discussions</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">Help</span><span class="err">:</span>
</span></span><span class="line"><span class="cl"><span class="n">Initializes</span> <span class="n">a</span> <span class="n">directory</span> <span class="n">with</span> <span class="n">a</span> <span class="n">new</span> <span class="n">Power</span> <span class="n">Apps</span> <span class="n">component</span> <span class="n">framework</span> <span class="n">project</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">Commands</span><span class="err">:</span>
</span></span><span class="line"><span class="cl"><span class="n">Usage</span><span class="err">:</span> <span class="n">pac</span> <span class="n">pcf</span> <span class="n">init</span> <span class="p">[-</span><span class="n">-namespace</span><span class="p">]</span> <span class="p">[-</span><span class="n">-name</span><span class="p">]</span> <span class="p">[-</span><span class="n">-template</span><span class="p">]</span> <span class="p">[-</span><span class="n">-framework</span><span class="p">]</span> <span class="p">[-</span><span class="n">-outputDirectory</span><span class="p">]</span> <span class="p">[-</span><span class="n">-run-npm-install</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">-</span><span class="n">-namespace</span>                 <span class="n">The</span> <span class="n">namespace</span> <span class="k">for</span> <span class="n">the</span> <span class="n">component</span><span class="p">.</span> <span class="p">(</span><span class="nb">alias</span><span class="err">:</span> <span class="n">-ns</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">-</span><span class="n">-name</span>                      <span class="n">The</span> <span class="n">name</span> <span class="k">for</span> <span class="n">the</span> <span class="n">component</span><span class="p">.</span> <span class="p">(</span><span class="nb">alias</span><span class="err">:</span> <span class="n">-n</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">-</span><span class="n">-template</span>                  <span class="n">Choose</span> <span class="n">a</span> <span class="n">template</span> <span class="k">for</span> <span class="n">the</span> <span class="n">component</span><span class="p">.</span> <span class="p">(</span><span class="nb">alias</span><span class="err">:</span> <span class="n">-t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                              <span class="n">Values</span><span class="err">:</span> <span class="n">field</span><span class="p">,</span> <span class="n">dataset</span>
</span></span><span class="line"><span class="cl">  <span class="p">-</span><span class="n">-framework</span>                 <span class="n">The</span> <span class="n">rendering</span> <span class="n">framework</span> <span class="k">for</span> <span class="n">control</span><span class="p">.</span> <span class="n">The</span> <span class="k">default</span> <span class="n">value</span> <span class="n">is</span> <span class="s1">&#39;none&#39;</span><span class="p">,</span> <span class="n">which</span> <span class="n">means</span> <span class="n">HTML</span><span class="p">.</span> <span class="p">(</span><span class="nb">alias</span><span class="err">:</span> <span class="n">-fw</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                              <span class="n">Values</span><span class="err">:</span> <span class="n">none</span><span class="p">,</span> <span class="n">react</span>
</span></span><span class="line"><span class="cl">  <span class="p">-</span><span class="n">-outputDirectory</span>           <span class="n">Output</span> <span class="n">directory</span> <span class="p">(</span><span class="nb">alias</span><span class="err">:</span> <span class="n">-o</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">-</span><span class="n">-run-npm-install</span>           <span class="n">Auto</span> <span class="n">run</span> <span class="s1">&#39;npm install&#39;</span> <span class="n">after</span> <span class="n">the</span> <span class="n">control</span> <span class="n">is</span> <span class="n">created</span><span class="p">.</span> <span class="n">The</span> <span class="k">default</span> <span class="n">value</span> <span class="n">is</span> <span class="s1">&#39;false&#39;</span><span class="p">.</span> <span class="p">(</span><span class="nb">alias</span><span class="err">:</span> <span class="n">-npm</span><span class="p">)</span>
</span></span></code></pre></div><p>For our first PCF we are building something simple, building a field template with no framework.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-PowerShell" data-lang="PowerShell"><span class="line"><span class="cl"><span class="n">pac</span> <span class="n">pcf</span> <span class="n">init</span> <span class="n">-n</span> <span class="n">TechTweedieControl11</span> <span class="n">-ns</span> <span class="n">TechTweedieControl11NS</span> <span class="n">-t</span> <span class="n">field</span>
</span></span></code></pre></div><p>Then run npm install, which is going to bring everything down</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-PowerShell" data-lang="PowerShell"><span class="line"><span class="cl"><span class="n">npm</span> <span class="n">install</span>
</span></span></code></pre></div><p>You may get some warnings, don&rsquo;t worry too much about them.</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="img/vmconnect_Ws3754bfWM.gif"
        data-srcset="/posts/build-a-basic-pcf-field-control/img/vmconnect_Ws3754bfWM.gif, img/vmconnect_Ws3754bfWM.gif 1.5x, /posts/build-a-basic-pcf-field-control/img/vmconnect_Ws3754bfWM.gif 2x"
        data-sizes="auto"
        alt="/posts/build-a-basic-pcf-field-control/img/vmconnect_Ws3754bfWM.gif"
        title="npm-install" /></p>
<h3 id="step-4-lets-go-through-the-code">Step 4: Lets go through the code</h3>
<p>When we explore some of our files.</p>
<h4 id="indexts-file">index.ts file</h4>
<p>We find an index.ts file, inside our file we will find;</p>
<h5 id="init">init</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-TypeScript" data-lang="TypeScript"><span class="line"><span class="cl"> <span class="kr">public</span> <span class="nx">init</span><span class="p">(</span><span class="nx">context</span>: <span class="kt">ComponentFramework.Context</span><span class="p">&lt;</span><span class="nt">IInputs</span><span class="p">&gt;,</span> <span class="nx">notifyOutputChanged</span><span class="o">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="k">void</span><span class="p">,</span> <span class="nx">state</span>: <span class="kt">ComponentFramework.Dictionary</span><span class="p">,</span> <span class="nx">container</span>:<span class="kt">HTMLDivElement</span><span class="p">)</span><span class="o">:</span> <span class="k">void</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// Add control initialization code
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span></code></pre></div><p>This is our entry point to our component, this gets called in the lifecycle when our control is loaded.</p>
<h5 id="updateview">updateView</h5>
<p>This is called whenever any value in the property bag has changed.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-TypeScript" data-lang="TypeScript"><span class="line"><span class="cl">    <span class="kr">public</span> <span class="nx">updateView</span><span class="p">(</span><span class="nx">context</span>: <span class="kt">ComponentFramework.Context</span><span class="p">&lt;</span><span class="nt">IInputs</span><span class="p">&gt;)</span><span class="o">:</span> <span class="k">void</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// Add code to update control view
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span></code></pre></div><h5 id="getoutputs">getOutputs</h5>
<p>This is called to pass data back to dataverse.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-PowerShell" data-lang="PowerShell"><span class="line"><span class="cl">    <span class="n">public</span> <span class="n">getOutputs</span><span class="p">()</span><span class="err">:</span> <span class="n">IOutputs</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="p">{};</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span></code></pre></div><h5 id="destroy">destroy</h5>
<p>We can use this to remove any components from the DOM tree once we have finished with out component.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-TypeScript" data-lang="TypeScript"><span class="line"><span class="cl">    <span class="kr">public</span> <span class="nx">destroy</span><span class="p">()</span><span class="o">:</span> <span class="k">void</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// Add code to cleanup control if necessary
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span></code></pre></div><h4 id="controlmanifestinputxml-file">ControlManifest.Input.xml file</h4>
<p>Tells us what the control is about, going through the elements.</p>
<h5 id="manifestcontrol-element">manifest/control element</h5>
<p>This contains things like its display name and description.</p>
<h5 id="manifestproperty-element">manifest/property element</h5>
<p>The other things it</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="img/vmconnect_dSuy1MWaZo.gif"
        data-srcset="/posts/build-a-basic-pcf-field-control/img/vmconnect_dSuy1MWaZo.gif, img/vmconnect_dSuy1MWaZo.gif 1.5x, /posts/build-a-basic-pcf-field-control/img/vmconnect_dSuy1MWaZo.gif 2x"
        data-sizes="auto"
        alt="/posts/build-a-basic-pcf-field-control/img/vmconnect_dSuy1MWaZo.gif"
        title="mainifest" /></p>
<h3 id="step-5-lets-run-it">Step 5: Lets run it</h3>
<p>We can run it to see what it looks like</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-PowerShell" data-lang="PowerShell"><span class="line"><span class="cl"><span class="n">npm</span> <span class="nb">start </span><span class="n">watch</span>
</span></span></code></pre></div><p>As this runs it will tell us if there are any errors, this allows you to make changes on the vscode side</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="img/vmconnect_fRtresEcup.gif"
        data-srcset="/posts/build-a-basic-pcf-field-control/img/vmconnect_fRtresEcup.gif, img/vmconnect_fRtresEcup.gif 1.5x, /posts/build-a-basic-pcf-field-control/img/vmconnect_fRtresEcup.gif 2x"
        data-sizes="auto"
        alt="/posts/build-a-basic-pcf-field-control/img/vmconnect_fRtresEcup.gif"
        title="npm start watch" /></p>
<h3 id="step-6-lets-add-some-console-logs">Step 6: Lets add some console logs</h3>
<p>Inside out index.ts file lets add two <code>console.log(&quot;text&quot;);</code>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="img/vmconnect_gtibKrlUUv.gif"
        data-srcset="/posts/build-a-basic-pcf-field-control/img/vmconnect_gtibKrlUUv.gif, img/vmconnect_gtibKrlUUv.gif 1.5x, /posts/build-a-basic-pcf-field-control/img/vmconnect_gtibKrlUUv.gif 2x"
        data-sizes="auto"
        alt="/posts/build-a-basic-pcf-field-control/img/vmconnect_gtibKrlUUv.gif"
        title="console logs in nodejs" /></p>
<p>Lets see if we can access some data, lets console log out the context object.</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="img/vmconnect_ygi592mE1t.gif"
        data-srcset="/posts/build-a-basic-pcf-field-control/img/vmconnect_ygi592mE1t.gif, img/vmconnect_ygi592mE1t.gif 1.5x, /posts/build-a-basic-pcf-field-control/img/vmconnect_ygi592mE1t.gif 2x"
        data-sizes="auto"
        alt="/posts/build-a-basic-pcf-field-control/img/vmconnect_ygi592mE1t.gif"
        title="console log context" /></p>
<p>Exploring the object lets see if we can access the value. Exploring the object we can see we have parameters &gt; sampleProperty &gt;raw so lets give that a go.</p>
<p>Lets change out console log to <code>console.log(context.parameters.sampleProperty.raw);</code></p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="img/vmconnect_ZgykFSbDmX.gif"
        data-srcset="/posts/build-a-basic-pcf-field-control/img/vmconnect_ZgykFSbDmX.gif, img/vmconnect_ZgykFSbDmX.gif 1.5x, /posts/build-a-basic-pcf-field-control/img/vmconnect_ZgykFSbDmX.gif 2x"
        data-sizes="auto"
        alt="/posts/build-a-basic-pcf-field-control/img/vmconnect_ZgykFSbDmX.gif"
        title="console log context.parameters.sampleProperty.raw" /></p>
<h3 id="step-7-lets-create-our-input">Step 7: Lets create our input</h3>
<p>This is where we need to create a property</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-TypeScript" data-lang="TypeScript"><span class="line"><span class="cl">    <span class="kr">private</span> <span class="nx">inputElement</span>: <span class="kt">HTMLInputElement</span><span class="p">;</span>
</span></span></code></pre></div><p>We are then going to update our init so that it works from this new property</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-TypeScript" data-lang="TypeScript"><span class="line"><span class="cl">        <span class="k">this</span><span class="p">.</span><span class="nx">inputElement</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&#34;input&#34;</span><span class="p">)</span> <span class="kr">as</span> <span class="nx">HTMLInputElement</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="p">.</span><span class="nx">inputElement</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&#34;type&#34;</span><span class="p">,</span> <span class="s2">&#34;text&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="p">.</span><span class="nx">inputElement</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&#34;value&#34;</span><span class="p">,</span> <span class="nx">context</span><span class="p">.</span><span class="nx">parameters</span><span class="p">.</span><span class="nx">sampleProperty</span><span class="p">.</span><span class="nx">raw</span> <span class="o">||</span> <span class="s2">&#34;&#34;</span><span class="p">);</span> <span class="c1">//Get value of property, and in the case of a null value set it to an empoty string
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">        <span class="nx">container</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">inputElement</span><span class="p">);</span>
</span></span></code></pre></div><p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="img/vmconnect_Ls5Ukcv8dS.gif"
        data-srcset="/posts/build-a-basic-pcf-field-control/img/vmconnect_Ls5Ukcv8dS.gif, img/vmconnect_Ls5Ukcv8dS.gif 1.5x, /posts/build-a-basic-pcf-field-control/img/vmconnect_Ls5Ukcv8dS.gif 2x"
        data-sizes="auto"
        alt="/posts/build-a-basic-pcf-field-control/img/vmconnect_Ls5Ukcv8dS.gif"
        title="create input element" /></p>
<h3 id="step-6-get-our-values-to-update">Step 6: Get our values to update</h3>
<p>This looks good, but now if the value of our sample property is updated, the value does not update.
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="img/vmconnect_Nv7Sv6iYoY.gif"
        data-srcset="/posts/build-a-basic-pcf-field-control/img/vmconnect_Nv7Sv6iYoY.gif, img/vmconnect_Nv7Sv6iYoY.gif 1.5x, /posts/build-a-basic-pcf-field-control/img/vmconnect_Nv7Sv6iYoY.gif 2x"
        data-sizes="auto"
        alt="/posts/build-a-basic-pcf-field-control/img/vmconnect_Nv7Sv6iYoY.gif"
        title="Get our values to update" /></p>
<p>In order to sort this, we need update our input value when the <code>updateView</code>
runs. We need to enter this line under our <code>updateView</code></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-TypeScript" data-lang="TypeScript"><span class="line"><span class="cl"><span class="k">this</span><span class="p">.</span><span class="nx">inputElement</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&#34;value&#34;</span><span class="p">,</span> <span class="nx">context</span><span class="p">.</span><span class="nx">parameters</span><span class="p">.</span><span class="nx">sampleProperty</span><span class="p">.</span><span class="nx">raw</span> <span class="o">||</span> <span class="s2">&#34;&#34;</span><span class="p">);</span>
</span></span></code></pre></div><p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="img/vmconnect_8UReJ3uQPf.gif"
        data-srcset="/posts/build-a-basic-pcf-field-control/img/vmconnect_8UReJ3uQPf.gif, img/vmconnect_8UReJ3uQPf.gif 1.5x, /posts/build-a-basic-pcf-field-control/img/vmconnect_8UReJ3uQPf.gif 2x"
        data-sizes="auto"
        alt="/posts/build-a-basic-pcf-field-control/img/vmconnect_8UReJ3uQPf.gif"
        title="Get our values to update" /></p>
<p>However does it update the other way? In order to make this work we need to modify our TypeScript.</p>
<p>First of all we need to edit our init, and add an event listener,</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-TypeScript" data-lang="TypeScript"><span class="line"><span class="cl">       <span class="c1">// We are adding an event listner for when the input changes, and if that happens we are going to nofiy
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">this</span><span class="p">.</span><span class="nx">inputElement</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&#34;input&#34;</span><span class="p">,</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="o">=&gt;</span><span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="nx">notifyOutputChanged</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span></code></pre></div><p>Then we go to the Get Outputs and update the return to be</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-TypeScript" data-lang="TypeScript"><span class="line"><span class="cl">    <span class="kr">public</span> <span class="nx">getOutputs</span><span class="p">()</span><span class="o">:</span> <span class="nx">IOutputs</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">sampleProperty</span>: <span class="kt">this.inputElement.value</span>
</span></span><span class="line"><span class="cl">        <span class="p">};</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span></code></pre></div><p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="img/vmconnect_NGWvaIppuB.gif"
        data-srcset="/posts/build-a-basic-pcf-field-control/img/vmconnect_NGWvaIppuB.gif, img/vmconnect_NGWvaIppuB.gif 1.5x, /posts/build-a-basic-pcf-field-control/img/vmconnect_NGWvaIppuB.gif 2x"
        data-sizes="auto"
        alt="/posts/build-a-basic-pcf-field-control/img/vmconnect_NGWvaIppuB.gif"
        title="/posts/build-a-basic-pcf-field-control/img/vmconnect_NGWvaIppuB.gif" /></p>
<h3 id="step-7-lets-get-our-control-in-to-our-model-driven-app">Step 7: Lets get our control in to our model driven app</h3>
<p>With our control working let&rsquo;s control it to Dataverse, and place it on a form.</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="img/vmconnect_vxO3lDiCxK.gif"
        data-srcset="/posts/build-a-basic-pcf-field-control/img/vmconnect_vxO3lDiCxK.gif, img/vmconnect_vxO3lDiCxK.gif 1.5x, /posts/build-a-basic-pcf-field-control/img/vmconnect_vxO3lDiCxK.gif 2x"
        data-sizes="auto"
        alt="/posts/build-a-basic-pcf-field-control/img/vmconnect_vxO3lDiCxK.gif"
        title="/posts/build-a-basic-pcf-field-control/img/vmconnect_vxO3lDiCxK.gif" /></p>
<p>Lets attach it to a control
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="img/vmconnect_PsH16x7RUZ.gif"
        data-srcset="/posts/build-a-basic-pcf-field-control/img/vmconnect_PsH16x7RUZ.gif, img/vmconnect_PsH16x7RUZ.gif 1.5x, /posts/build-a-basic-pcf-field-control/img/vmconnect_PsH16x7RUZ.gif 2x"
        data-sizes="auto"
        alt="/posts/build-a-basic-pcf-field-control/img/vmconnect_PsH16x7RUZ.gif"
        title="/posts/build-a-basic-pcf-field-control/img/vmconnect_PsH16x7RUZ.gif" /></p>
<h2 id="conclusion">Conclusion</h2>
<p>Congratulations! You&rsquo;ve successfully built and tested your first Power Apps Component Framework (PCF) control. This journey, from setting up the environment to deploying your control in a model-driven app, has provided you with a solid foundation for creating more complex and customized components. By leveraging TypeScript and HTML, along with powerful tools like Visual Studio Code and the Power Platform Tools Extension, you now have the skills to extend your applications beyond the standard functionalities.</p>
<p>Remember, the true power of PCFs lies in their ability to enhance the user experience and meet specific business needs that out-of-the-box solutions may not cover.</p>
<p>Thank you for following along, and happy coding! If you have any questions or need further assistance, feel free to reach out or watch the accompanying YouTube video for more detailed explanations and visuals. Keep pushing the boundaries of what&rsquo;s possible with Power Apps!</p>
</div><div class="post-footer" id="post-footer">
    <div class="post-info"><div class="post-info-tag"><span><a href="/tags/pcf/">PCF</a>
                </span></div><div class="post-info-line"><div class="post-info-mod">
                <span>Updated on 2024-06-16</span>
            </div><div class="post-info-mod"></div>
        </div><div class="post-info-share">
            <span><a href="#" onclick="return false;" title="Share on Twitter" data-sharer="twitter" data-url="http://localhost:1313/posts/build-a-basic-pcf-field-control/" data-title="Build a Basic PCF Field Control" data-via="itweedie" data-hashtags="PCF"><i class="fa-brands fa-square-x-twitter fa-fw"></i></a><a href="#" onclick="return false;" title="Share on Facebook" data-sharer="facebook" data-url="http://localhost:1313/posts/build-a-basic-pcf-field-control/" data-hashtag="PCF"><i class="fa-brands fa-facebook-square fa-fw"></i></a><a href="#" onclick="return false;" title="Share on Linkedin" data-sharer="linkedin" data-url="http://localhost:1313/posts/build-a-basic-pcf-field-control/"><i class="fa-brands fa-linkedin fa-fw"></i></a><a href="#" onclick="return false;" title="Share on WhatsApp" data-sharer="whatsapp" data-url="http://localhost:1313/posts/build-a-basic-pcf-field-control/" data-title="Build a Basic PCF Field Control" data-web><i class="fa-brands fa-whatsapp fa-fw"></i></a></span>
        </div></div><div class="post-nav"><a href="/posts/how-to-install-hugo-on-windows-11/" class="prev" rel="prev" title="How to Install Hugo on Windows 11"><i class="fa-solid fa-angle-left fa-fw"></i>Previous Post</a>
            <a href="/posts/command-bar-to-call-custom-page/" class="next" rel="next" title="Command Bar to Call Custom Page in Model Driven App">Next Post<i class="fa-solid fa-angle-right fa-fw"></i></a></div></div>
</div></article></div>
            </main>
            <footer class="footer"><div class="footer-container"><div class="footer-line">Tech Tweedie Blog</div><div class="footer-line">Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.126.3">Hugo</a> | Theme - <a href="https://github.com/khusika/FeelIt" target="_blank" rel="noopener noreffer" title="FeelIt 1.0.2"><i class="fa-solid fa-hand-holding-heart fa-fw"></i> FeelIt</a>
        </div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="fa-regular fa-copyright fa-fw"></i><span itemprop="copyrightYear">2019 - 2025</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/"></a></span></div>
</div>
</footer>
        </div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fa-solid fa-chevron-up fa-fw"></i>
            </a></div><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><link rel="stylesheet" href="/lib/lightgallery/lightgallery.min.css"><script src="/lib/lazysizes/lazysizes.min.js"></script><script src="/lib/typeit/typeit.min.js"></script><script src="/lib/lightgallery/lightgallery.min.js"></script><script src="/lib/lightgallery/lg-thumbnail.min.js"></script><script src="/lib/lightgallery/lg-zoom.min.js"></script><script src="/lib/clipboard/clipboard.min.js"></script><script src="/lib/sharer/sharer.min.js"></script><script>window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":10},"comment":{},"data":{"id-1":"Tech Tweedie","id-2":"Tech Tweedie"},"lightGallery":{"actualSize":false,"exThumbImage":"data-thumbnail","hideBarsDelay":2000,"selector":".lightgallery","speed":400,"thumbContHeight":80,"thumbWidth":80,"thumbnail":true},"typeit":{"cursorChar":null,"cursorSpeed":null,"data":{"id-1":["id-1"],"id-2":["id-2"]},"duration":null,"speed":null}};</script><script src="/js/theme.min.js"></script></body></html>
